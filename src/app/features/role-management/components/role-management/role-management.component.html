<!-- <p-table [value]="roles" [tableStyle]="{ 'min-width': '50rem' }">
  <ng-template #header>
    <tr>
      <th>Name</th>
      <th>Permissions</th>
      <th>Actions</th>
    </tr>
  </ng-template>
  <ng-template #body let-role>
    <tr>
      <td>{{ role.name }}</td>
      <td>
        @for (permission of role.permissionList; track permission) {
          <p-chip [label]="permission"></p-chip>
        }
      </td>
      <td>Actions</td>
    </tr>
  </ng-template>
</p-table> -->

<div
  class="relative overflow-hidden bg-white shadow-md dark:bg-gray-800 sm:rounded-lg"
>
  <div
    class="flex-row items-center justify-between p-4 space-y-3 sm:flex sm:space-y-0 sm:space-x-4"
  >
    <div>
      <h5 class="mr-3 font-semibold dark:text-white">YouPass Roles</h5>
      <p class="text-gray-500 dark:text-gray-400">
        Manage all your existing roles or add a new one
      </p>
    </div>
    <button mat-flat-button (click)="openRoleForm()">Add new role</button>
  </div>
</div>

<div>
  <table
    mat-table
    [dataSource]="roles"
    matSort
    matSortActive="name"
    matSortDisableClear
    matSortDirection="asc"
  >
    <!-- Role name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let role">{{ role.name }}</td>
    </ng-container>

    <!-- Permission list Column -->
    <ng-container matColumnDef="permissionList">
      <th mat-header-cell *matHeaderCellDef>Available permissions</th>
      <td mat-cell *matCellDef="let role">
        @for (permission of role.permissionList; track permission) {
          <mat-chip>{{ permission | permissionInView | titlecase }}</mat-chip>
        }
      </td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actionList">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let role">
        <button
          mat-icon-button
          [matMenuTriggerFor]="menu"
          aria-label="Role icon-button with a menu"
        >
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item>
            <mat-icon>info</mat-icon>
            <span>View</span>
          </button>
          <button
            mat-menu-item
            [disabled]="role.name === 'superadmin'"
            (click)="openRoleForm(role)"
          >
            <mat-icon>edit</mat-icon>
            <span>Edit</span>
          </button>
          <button
            mat-menu-item
            [disabled]="role.name === 'superadmin'"
            (click)="openConfirmDialog(role)"
          >
            <mat-icon>delete</mat-icon>
            <span>Delete</span>
          </button>
        </mat-menu>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
